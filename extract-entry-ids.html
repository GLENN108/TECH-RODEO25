<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extract Google Form Entry IDs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        .instructions ol {
            margin-left: 20px;
        }
        .instructions li {
            margin-bottom: 10px;
        }
        textarea {
            width: 100%;
            min-height: 200px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            margin-bottom: 20px;
        }
        button {
            background: #4285f4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #357ae8;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f1f8e9;
            border-radius: 5px;
            display: none;
        }
        .result h3 {
            margin-top: 0;
            color: #2e7d32;
        }
        .entry-id {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-left: 4px solid #4caf50;
        }
        .entry-id strong {
            color: #333;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Google Form Entry ID Extractor</h1>
        
        <div class="instructions">
            <strong>Instructions:</strong>
            <ol>
                <li>Open your Google Form: <a href="https://forms.gle/VAuBwCRavZUriFjD7" target="_blank">https://forms.gle/VAuBwCRavZUriFjD7</a></li>
                <li>Right-click on the form page and select "Inspect" (or press F12)</li>
                <li>In the Elements/Inspector tab, press Ctrl+F (or Cmd+F on Mac) to search</li>
                <li>Search for: <code>name="entry.</code></li>
                <li>Copy the entire HTML of the form (Ctrl+A, then Ctrl+C in the Elements tab)</li>
                <li>Paste it in the textarea below and click "Extract Entry IDs"</li>
            </ol>
            <p><strong>Alternative:</strong> You can also view the page source (Ctrl+U) and copy the HTML from there.</p>
        </div>
        
        <textarea id="htmlInput" placeholder="Paste the HTML from your Google Form here..."></textarea>
        
        <button onclick="extractEntryIds()">Extract Entry IDs</button>
        
        <div class="result" id="result">
            <h3>Extracted Entry IDs:</h3>
            <div id="entryIdsList"></div>
            <h3 style="margin-top: 20px;">JavaScript Object (copy this to registration.js):</h3>
            <textarea id="jsObject" readonly style="min-height: 150px;"></textarea>
        </div>
    </div>

    <script>
        function extractEntryIds() {
            const html = document.getElementById('htmlInput').value;
            if (!html) {
                alert('Please paste the HTML first!');
                return;
            }

            // Create a temporary DOM element to parse HTML
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            
            // Find all input elements with entry.* names
            const inputs = doc.querySelectorAll('input[name^="entry."]');
            
            if (inputs.length === 0) {
                alert('No entry IDs found. Make sure you copied the correct HTML from the Google Form.');
                return;
            }

            const entryIds = {};
            const entryIdsList = document.getElementById('entryIdsList');
            entryIdsList.innerHTML = '';

            // Extract entry IDs and try to find labels
            inputs.forEach((input, index) => {
                const entryId = input.name;
                
                // Try to find the label/question text
                let label = 'Field ' + (index + 1);
                
                // Look for label in various possible locations
                const formItem = input.closest('[class*="Item"]');
                if (formItem) {
                    const titleElement = formItem.querySelector('[class*="Title"], [class*="label"]');
                    if (titleElement) {
                        label = titleElement.textContent.trim();
                    }
                }
                
                // Store entry ID
                entryIds[label] = entryId;
                
                // Display in UI
                const entryDiv = document.createElement('div');
                entryDiv.className = 'entry-id';
                entryDiv.innerHTML = `<strong>${label}:</strong> <code>${entryId}</code>`;
                entryIdsList.appendChild(entryDiv);
            });

            // Generate JavaScript object
            const jsObject = `const entryIds = {\n` +
                Object.entries(entryIds).map(([label, id]) => {
                    // Create a safe key name from label
                    const key = label
                        .toLowerCase()
                        .replace(/[^a-z0-9]+/g, '_')
                        .replace(/^_|_$/g, '');
                    return `    ${key}: '${id}', // ${label}`;
                }).join('\n') +
                `\n};`;
            
            document.getElementById('jsObject').value = jsObject;
            document.getElementById('result').style.display = 'block';
        }
    </script>
</body>
</html>
